<div class="container my-5">
  <h2 class="mb-4">Your Cart</h2>

  <div class="card p-3">
    @if (cartService.getCartItem().length == 0){
            <div class="col-12 text-center">
                <h4 style="color: rgb(141, 139, 139);">Your cart is empty</h4>
                <a routerLink="/" style="color: blue;cursor: pointer;"> Continue Shopping</a>
            </div>
        }

        <!-- cart_item -->
    @for (item of cartService.getCartItem(); track item.id) {
    <div class="cart-item d-flex align-items-center border-bottom py-3">
        
      <!-- check -->
       <div class="ckeck-box" style="margin-right: 10px;">
        <input 
        [checked]="item.is_select"
        (change)="cartService.selectCartItem(item)"
        type="checkbox" 
        class="form-control form-check-input">
       </div>


      <!-- Product Image -->
      <img style="width: 130px; height: 130px; padding: 10px;border-radius: 10px;"
      [src]="item.image" class="product-img me-3" [alt]="item.title" />

      
      <!-- Title + Category -->
      <div class="flex-grow-1">
        <h6 style="font-size: 20px; font-weight: 700;"
        class="mb-1">{{ item.title }}</h6>

        <small class="text-muted">{{ item.category }}</small>
      </div>

      <!-- Price -->
      <div class="text-nowrap me-4 fw-semibold">
        {{ item.price | currency }}
      </div> 

      <!-- Quantity -->
      <div class="me-4">
        <input 
          type="number" 
          class="form-control " 
          value="-"
            type="button"
            (click)="cartService.decrementQty(item)"
        />
         <!-- error -->
        <strong class="btn btn-sm" style="font-size: 18px; font-weight: 600;">{{ item.qty }}</strong>

        <input 
          type="number" 
          class="form-control " 
          value="+"
            type="button"
            (click)="cartService.incrementQty(item)"
        />
      </div>

      <!-- Total -->
      <div class="me-4 fw-bold text-nowrap">
        {{ item.price * item.qty | currency }}
      </div>

      <!-- Remove -->
      <div>
        <button 
        style="text-decoration: none; font-weight: 600; "
        (click)="cartService.removeCartItem(item)"
        class="btn btn-link text-danger p-0">
          Remove
        </button>
      </div>
    </div>
}
  </div>

   @if (cartService.getCartItem().length > 0){
  <div class="row justify-content-end mt-4">
    <div class="col-md">
      <div class="cart-summary p-3 border rounded shadow-sm">
        <h5>Summary</h5>
        <hr />
        <p class="d-flex justify-content-between">
          <span>Total :</span>
          <span style="background-color: rgb(68, 202, 255);
          border: none;
          font-size: 16px;
          font-weight: 700;
          padding: 5px;
          border-radius: 5px;">{{ cartService.getCartTotal() | currency}}</span>

        </p>
        <hr />
        <p class="d-flex justify-content-between fw-bold">
          <!-- <span>Total</span>
          <span>{{ getSubtotal() + 5 | currency }}</span> -->
        </p>
        <button style="background-color: rgb(68, 202, 255);
          border: none;
          font-size: 16px;
          font-weight: 700;"
        [routerLink]="['/check-out']"
        class="btn btn-success w-100 mt-2">
        Checkout
      </button>

      </div>
    </div>
  </div>
   }
  

 
</div>
